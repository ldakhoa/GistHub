query Gists($first: Int, $after: String, $privacy: GistPrivacy) {
  viewer {
    gists(first: $first, after: $after, privacy: $privacy) {
      edges {
        node {
          ...GistDetails
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query Gist($gistID: String!) {
  viewer {
    gist(name: $gistID) {
        ...GistDetails
    }
  }
}

query GistsFromUser($userName: String!, $privacy: GistPrivacy, $first: Int, $after: String) {
  user(login: $userName) {
    gists(privacy: $privacy, first: $first, after: $after) {
     edges {
        node {
          ...GistDetails
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

fragment GistDetails on Gist {
  id
  name
  description
  files {
    name
    language {
      name
    }
    size
    text
  }
  createdAt
  owner {
    id
    login
    avatarUrl
    ... on User {
      name
      twitterUsername
      isSiteAdmin
      url
      bio
      email
    }
  }
  updatedAt
  comments {
    totalCount
  }
  isPublic
  url
  stargazerCount
  forks {
    totalCount
  }
}